{%- liquid
  assign options = block.settings
  assign text = options.text
  assign url = options.url
  assign btn_style = options.btn_style
  assign button_border_gradient = options.button_border_gradient
  assign icon_type = options.icon_type
  assign custom_icon_image = options.custom_icon_image
  assign icon = options.icon
-%}

{%- if text != blank -%}
  <div
    data-product-block='{{ block.id }}'
    class='product-button-block block-{{ block.id }}'
    {{ block.shopify_attributes }}
  >
    {%- if btn_style == 'link' -%}
      <a
        class='product-button-block__text'
        {% if url != blank %}
          href='{{ url }}'
        {% endif %}
        aria-label='{{ text | strip_html | escape }}'
      >
        {%- if icon_type == 'custom' and custom_icon_image != blank -%}
          <img
            {% render 'image-attributes',
              image: custom_icon_image,
              size: 'small',
              class: 'product-button-block__icon'
            %}
          >
        {%- elsif icon_type == 'preset' -%}
          {% render 'icon-pack', icon: icon, class: 'product-button-block__icon' %}
        {%- endif -%}

        <span class='link-parent-for-hover'>
          <span class='link__text'>{{ text }}</span>
        </span>
      </a>
    {%- else -%}
      <a
        class='btn btn--lg btn--{{ btn_style }} {% if button_border_gradient != blank %}btn--custom-gradient{% endif %} product-button-block__btn'
        {% if url != blank %}
          href='{{ url }}'
        {% endif %}
        aria-label='{{ text | strip_html | escape }}'
      >
        {%- if icon_type == 'custom' and custom_icon_image != blank -%}
          <img
            {% render 'image-attributes',
              image: custom_icon_image,
              size: 'small',
              class: 'product-button-block__icon'
            %}
          >
        {%- elsif icon_type == 'preset' -%}
          {% render 'icon-pack', icon: icon, class: 'product-button-block__icon' %}
        {%- endif -%}
        {{- text -}}
      </a>
    {%- endif -%}
  </div>
{%- endif -%}
